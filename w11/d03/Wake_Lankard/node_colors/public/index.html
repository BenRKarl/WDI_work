<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Node Colors</title>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>
<body>
  <p>
    <input id="color-input" type="text">
    <input id="submit" type="submit">
  </p>
  <script>
    fetchColors = function(){
      $.ajax({
        url: '/colors',
        method: 'GET',
        dataType: 'json',
        success: function(data){
          var index = Math.floor(Math.random()*data.length);
          $('body').css('background-color', data[index]);
          
        }
      });
    };
    addColor = function(color){
      $.ajax({
        url: '/colors',
        method: "POST",
        dataType: 'json',
        data: { color: color },
        success: function(data){
          console.log(data);
          $('body').css('background-color', data[data.lenght-1]);

        }
      })
    }
    $(function(){
      setInterval(function(){
        fetchColors();
      }, 1000);

      $('#submit').click(function(){
        var color = $('#color-input').val();
        $('#color-input').val('');
        addColor(color);
      })
      
    })
    
  </script>
</body>
</html>